(()=>{var L=t=>[...document.querySelectorAll(t)],T=t=>{let a=document.querySelector(t.currentTarget.hash);a&&t.currentTarget.dataset.noscroll===void 0&&t.currentTarget.hash&&t.currentTarget.pathname===window.location.pathname&&!t.metaKey&&(t.preventDefault(),a.scrollIntoView({behavior:"smooth"}))},M=t=>new Promise(a=>{let o=document.createElement("img");o.onload=()=>a(o),o.src=t}),I=(t,a,o,c,w)=>{let l=a.width,h=a.height,d=t.canvas.width,s=t.canvas.height,n=d,f=s,r,e;if(o!=="stretch"){let i=1;o==="contain"&&(i=Math.min(d/l,s/h)),o==="cover"&&(i=Math.max(d/l,s/h)),o==="balance"&&(i=(d/l+s/h)*.5),n=Math.floor(l*i),f=Math.floor(h*i)}r=(d-n)/2,e=(s-f)/2,c==="hoist"&&(r=0),c==="fly"&&(r=d-n),t.drawImage(a,r,e,n,f),!w&&(n<d&&(t.drawImage(a,0,0,1,h,0,e,r,f),t.drawImage(a,l-1,0,1,h,r+n,e,d-(n+r),f)),f<s&&(t.drawImage(a,0,0,l,1,r,0,n,e),t.drawImage(a,0,h-1,l,1,r,f+e,n,e)))};L("a[href*='#']").forEach(t=>t.addEventListener("click",T));L("[data-component='replace']").forEach(t=>t.addEventListener("click",()=>{let a=t.dataset.replace,o=t.parentNode;t.remove(),o.innerHTML=a}));var q=(t,a=5)=>t<=.5?Math.pow(t*2,a)/2:1-Math.pow(2-t*2,a)/2;L("[data-component='image-diff'").forEach(async t=>{let a=t.querySelector(".status-count"),o=t.querySelector("canvas.difference"),c=t.querySelector("canvas.inspector"),w=await M(t.dataset.imageA),l=await M(t.dataset.imageB),h=o.getContext("2d",{willReadFrequently:!0}),d=c.getContext("2d",{willReadFrequently:!0});o.width*=window.devicePixelRatio,o.height*=window.devicePixelRatio,c.width=o.width,c.height=o.height;let{width:s,height:n}=o,f=[.299,.587,.114],r=(e,i,g)=>{let p=t.resize?t.resize.value:"stretch",E=t.align?t.align.value:"center";if(e.clearRect(0,0,s,n),e.globalCompositeOperation="source-over",I(e,w,p,E,i||g),i||g){e.filter="none";let m=o.width/o.offsetWidth,v=3*m,u=100*m;i*=m,g*=m,e.save(),e.beginPath(),e.moveTo(i+u,g),e.arc(i,g-.001,u,0,Math.PI*2),e.closePath(),e.clip(),I(e,l,p,E),e.restore(),e.beginPath(),e.moveTo(i+u-v/2,g),e.arc(i,g-.001,u-v/2,0,Math.PI*2),e.closePath(),e.strokeStyle="#aaa3",e.lineWidth=v,e.stroke();return}e.globalCompositeOperation="difference",I(e,l,p,E);let{data:b}=e.getImageData(0,0,s,n);e.fillStyle="white",e.globalCompositeOperation="color",e.fillRect(0,0,s,n),e.globalCompositeOperation="difference",e.fillRect(0,0,s,n),e.fillStyle="#121e25",e.globalCompositeOperation="lighten",e.fillRect(0,0,s,n);let P=b.reduce((m,v,u)=>m+(u%4===3?0:q(v/255,1.25)*f[u%4]))/(b.length*.25);a.innerHTML=(P*100).toFixed(1)+"%"};t.addEventListener("submit",e=>{e.preventDefault()}),t.addEventListener("input",()=>{r(h)}),c.addEventListener("touchmove",e=>{e.preventDefault()}),c.addEventListener("pointerenter",e=>{t.classList.add("inspect"),r(d,e.offsetX,e.offsetY)}),c.addEventListener("pointermove",e=>{r(d,e.offsetX,e.offsetY)}),c.addEventListener("pointerleave",e=>{t.classList.remove("inspect")}),r(h)});})();
