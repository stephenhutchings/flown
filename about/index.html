<html lang="en-GB"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><link rel="stylesheet" href="/assets/app.css"/><link rel="shortcut icon" href="/assets/favicon.png"/><base href="https://stephenhutchings.github.io/flown/"/></head><body class="page-about"><header><nav class="fx gap pb2"><a href="/">flown</a><a href="/about/">about</a><a href="/size/">size</a><a class="misa" href="https://npmjs.com/package/@sings/flown">NPM</a><a href="https://github.com/stephenhutchings/flown">GitHub</a></nav></header><article class="mb3"><h2 id="goals">Goals</h2>
<ul>
<li>High quality artwork</li>
<li>Stylistic uniformity</li>
<li>Limited visual complexity</li>
<li>Improvements to legibility</li>
</ul>
<h2 id="aspect-ratios">Aspect Ratios</h2>
<p>With few exceptions, flags are rectangular, but their sides occur in many
different ratios. Purists will rightly argue that the original intentions of the
design should be upheld. But there is a counter-argument. Mismatched proportions
degrade the appearance of flags, making outliers appear irregular. Designers
identify these inconsistencies as a distraction that should be minimised. The
layouts they create often rely on repeatable blocks of consistently sized
shapes. There is a temptation to crop or scale the flags as needed, but the
variety of designs is not well suited to this approach.</p>
<p>Deciding on an aspect ratio is another difficult choice. The most commonly used
ratio is 3:2. However, another popular choice is 2:1. The gap between these
options is significant. When the narrower designs are adapted to the wider
format, they appear stretched. The same is true in the other direction &#8212; wider
flags look too squashed in the narrower format. To compromise, an aspect ratio
of 5:3 is used.</p>
<p>Standardising these shapes without introducing distortions is a substantial
undertaking. Scaling flags without deviating from their construction rules is an
impossible task, as their official constructions often require specific ratios.
With that in mind, the modifications have been done in a way that aims to tread
as lightly as possible.</p>
<p>How each flag has been scaled has depended on the nature of the design.
Different elements are handled as follows.</p>
<ol>
<li><p>Horizontal, vertical and diagonal bands are stretched to fill the new
dimensions.</p>
</li>
<li><p>Emblems and other items in the foreground maintain their proportions when
scaled. For example, if the new flag design is 120% wider, the foreground
elements are increased in both directions by 110%. This balances the change
in distance to the different edges.</p>
</li>
<li><p>Large items like squares and triangles are scaled in a way that best
compromises between the different relationships that inform them. For
example, if an equilateral triangle points to the center on a narrow flag, it
cannot be widened and keep equal sides. Instead, it is stretched to a lesser
degree, keeping something of the equilateral triangle while still pointing
near the centre of the flag.</p>
</li>
</ol>
<!-- 2. Squares and equilateral triangles have been generally been scaled in a way
   that maintains their proportions. In a similar way, items like crosses are
   scaled so that there vertical and horizontal thicknesses remain in sync. -->

<h2 id="simplification">Simplification</h2>
<p>Many flags use basic geometric constructions, but not all. For example, Belize,
Bolivia, and Brunei feature complex illustrations and typography in their
designs. Much of this detail is unnecessary when flags are displayed at small
sizes. Moreover, the most complex of these designs take up hundreds of
kilobytes, negating the advantages of the vector format.</p>
<p>All flags are drawn on a 1200&times;720 unit grid. The large size of the grid
allows pre-rounding to whole units without visually compromising each design.
Snapping values in this way removes the risk of later minification steps
introducing unwanted distortions. This grid determines the finest level of
detail that is possible, so simplification remains consistent across the
collection. However, an exception is made for typography, which is allowed an
additional decimal place of accuracy to avoid exaggerated distortions.</p>
<p>Shapes are drawn with only a <code>&lt;path&gt;</code>, <code>&lt;circle&gt;</code> and <code>&lt;use&gt;</code> elements, and
colour is exclusively applied with the <code>fill</code> attribute. No <code>stroke</code> or
<code>gradient</code> is applied to any of the artwork. This constraint should make the
collection more amenable to further processing by others, as there are less
corner cases to consider.</p>
<p>Land masses are drawn using only straight lines, so that there shapes can be
simplified using the <a href="https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm">Ramer–Douglas–Peucker</a> algorithm.</p>
<p>Finally, each design has been simplified to fit within a maximum file size of
10kB. The means the most detailed flags feature the highest level of simplification.</p>
<h1 id="colours">Colours</h1>
<p>Despite their tendency towards primary colours, flags exhibit a large degree of subtle, and often unintentional, variation. While some flags dictate the use of specific colours, others are less precise.</p>
<figure>
  <img width="500" height="200" alt="All flag colours" src="/assets/img/palette/all.svg">
  <figcaption>
    The colour palette used by all the original flags includes over a thousand distinct varieties. This profusion tends to fall into broadly similar tones and hues.
  </figcaption>
</figure>

<p>Limiting the colour palette means the flags in this collection deviate from
their official designs. However, it ensures that when flags are shown together,
the different combinations are predictable and unlikely to clash. The small,
predefined palette also sets the groundwork for more creative
modifications.</p>
<p>Choosing the best approach to align these colours requires some thinking. An
overly minimal approach would force unnecessary substitutions, significantly
altering the original designs. It&#8217;s also important that the colour palette is
defined by the needs of the flags, and not the other way around.</p>
<p>To construct an initial palette, the full color selection was quantized down to
colour sets of varying quantities. From this process, a basic palette of 16
colors was selected. This set was able to reproduce most flags with reasonable accuracy, while minimising duplication.</p>
<figure class="fx fxc gap">
  <img width="160" height="10" alt="Quantized palette" src="/assets/img/palette/16.svg">
  <img width="200" height="10" alt="Quantized palette" src="/assets/img/palette/20.svg">
  <img width="240" height="10" alt="Quantized palette" src="/assets/img/palette/24.svg">
  <img width="320" height="10" alt="Quantized palette" src="/assets/img/palette/32.svg">
  <figcaption>
    The full set quantized down to a selection of 16, 20, 24 and 32 colours.
  </figcaption>
</figure>

<p>But this mechanical selection wasn&#8217;t perfect. The process treats all
colours equally, regardless of the area they cover. Rarer colours &#8212; like
the turqoise variations used by the Bahamas and Uzbekistan, or the Qatari maroon
&#8212; were lost in the averages. Other detailed elements were too
complex to resolve without additional shades. To resolve these issues, the
palette was expanded to 32 colours. New colours were added manually
to fill the gaps according to the flags that were most affected.</p>
<p>To prevent introducing too much bias, the palette is mapped to the original flags by computing the <a href="https://en.wikipedia.org/wiki/Color_difference#CIEDE2000">CIEDE2000</a> colour difference in L*a*b* color space. This ensures consistent mapping of colours and helps to identify issues. When an unexpected color is used, it suggests a weakness in the palette.</p>
<p>Before computing the difference, the b-channel of the Lab colour value is
downweighted and the L-channel is upweighted. The first weighting helps to
emphasise cultural distinctions in primary colours over perceptual differences.
For example, as red moves towards orange, it is more likely to be perceived as a
different primary color compared to an equivalent move towards violet. The
second weighting prioritised tonal similarity over exact hue matching. Note that
this weighting was not chosen scientifically, and may reflect the author&#8217;s
biases.</p>
<p>Finally, the palette was manually refined to better align the levels of
saturation and brightness of the palette. Again, this reflects the author&#8217;s
personal taste.</p>
<figure>
  <img width="320" height="10" alt="Final colour palette" src="/assets/img/palette/custom-32.svg">
  <figcaption>
    Choosing the final palette has been equal parts art and science.
  </figcaption>
</figure>

<p>It&#8217;s worth noting that the palette does not include pure white or black. This was originally a result of the colour quantisation, but has its own benefits. The outlines of flags that use large fields of white, such as the Japanese flag, remain defined on pages using a pure white background.</p>
</article><script src="/assets/app.js"></script></body></html>