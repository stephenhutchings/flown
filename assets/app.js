(()=>{var u=t=>[...document.querySelectorAll(t)],b=t=>{let a=document.querySelector(t.currentTarget.hash);a&&t.currentTarget.dataset.noscroll===void 0&&t.currentTarget.hash&&t.currentTarget.pathname===window.location.pathname&&!t.metaKey&&(t.preventDefault(),a.scrollIntoView({behavior:"smooth"}))},g=t=>new Promise(a=>{let c=document.createElement("img");c.onload=()=>a(c),c.src=t}),m=(t,a,c,f)=>{let l=a.width,e=a.height,s=t.canvas.width,o=t.canvas.height,n=s,d=o;if(c!=="stretch"){let h=1;c==="contain"&&(h=Math.min(s/l,o/e)),c==="cover"&&(h=Math.max(s/l,o/e)),c==="balance"&&(h=(s/l+o/e)*.5),n=Math.floor(l*h),d=Math.floor(e*h)}let r=f==="hoist"?0:(s-n)/2,i=(o-d)/2;t.drawImage(a,r,i,n,d),n<s&&(t.drawImage(a,0,0,1,e,0,i,r,d),t.drawImage(a,l-1,0,1,e,r+n,i,s-(n+r),d)),d<o&&(t.drawImage(a,0,0,l,1,r,0,n,i),t.drawImage(a,0,e-1,l,1,r,d+i,n,i)),t.restore()};u("a[href*='#']").forEach(t=>t.addEventListener("click",b));u("[data-component='image-diff'").forEach(async t=>{let a=t.querySelector("canvas"),c=t.querySelector(".status-count"),f=await g(t.dataset.imageA),l=await g(t.dataset.imageB),e=a.getContext("2d",{willReadFrequently:!0});a.width*=window.devicePixelRatio,a.height*=window.devicePixelRatio;let s=()=>{let o=t.resize?t.resize.value:"stretch",n=t.align?t.align.value:"center",d=1.5,{width:r,height:i}=a;e.filter=`contrast(${d})`,e.globalCompositeOperation="source-over",m(e,f,o,n),e.globalCompositeOperation="difference",m(e,l,o,n);let{data:h}=e.getImageData(0,0,r,i);e.fillStyle="white",e.globalCompositeOperation="color",e.fillRect(0,0,r,i),e.globalCompositeOperation="difference",e.fillRect(0,0,r,i),e.fillStyle="#121e25",e.globalCompositeOperation="lighten",e.fillRect(0,0,r,i);let w=h.reduce((p,v,y)=>p+(y%4===3?0:v/255))/(h.length*.75);c.innerHTML=(w*100).toFixed(1)+"%"};t.addEventListener("submit",o=>{o.preventDefault()}),t.addEventListener("input",o=>{s()}),s()});})();
